name: main_agent
version: 1.0.0
description: 有声绘本制作系统

agent:
  name: picture_book_agent
  version: 1.0.0
  type: main_agent
  
  system_prompt:
    path: ../prompts/zh/main_agent.yaml
  
  storage:
    type: local
    path: ./outputs
  
  llm:
    model: qwen-plus
    temperature: 0.7
    max_tokens: 2048

# MCP服务配置
mcp_services:
  t2i:
    enable: true
    type: t2i_mcp
    name: generate_image
    description: 生成绘本图片
    config_path: ./mcp/t2i_config.yaml
  
  tts:
    enable: true
    type: tts_mcp
    name: synthesize_speech
    description: 合成语音
    config_path: ./mcp/tts_config.yaml

# SubAgent配置
sub_agents:
  prompt_generator:
    enable: true
    name: prompt_generator
    description: 根据前提变量生成文生图提示词
    config_path: ./sub_agents/prompt_gen.yaml
  
  script_generator:
    enable: true
    name: script_generator
    description: 根据图片提示词和前提变量生成适配年龄的台词
    config_path: ./sub_agents/script_gen.yaml

# 工作流配置
workflow:
  steps:
    - id: 1
      name: 解析用户输入
      tool: parse_premise
      required: true
    
    - id: 2
      name: 生成文生图提示词
      subagent: prompt_generator
      required: true
    
    - id: 3
      name: 生成绘本图片
      tool: generate_image
      required: true
    
    - id: 4
      name: 生成台词
      subagent: script_generator
      required: true
    
    - id: 5
      name: 生成语音
      tool: synthesize_speech
      required: true
    
    - id: 6
      name: 整合结果并返回
      type: final
      required: true
